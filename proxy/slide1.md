### Паттерн Proxy

---

### **Определение** 
Паттерн Proxy (Заместитель) — это структурный шаблон проектирования, который предоставляет суррогат или заместителя другому объекту для контроля доступа к нему.

Proxy управляет доступом к оригинальному объекту, добавляя дополнительные действия до или после обращения к реальному объекту.

---
### Проблема
Иногда необходимо контролировать доступ к объекту:
- Объект может быть дорогим в создании (например, загрузка больших данных).
- Требуется защита (например, проверка прав доступа).
- Нужна удалённая работа (например, через сеть или интернет).
- Требуется логирование или кеширование при вызовах.

**Но** — если встроить всю эту логику прямо в объект, он станет перегруженным и сложно масштабируемым.

---
### Решение
Вводится объект-заместитель (Proxy), который реализует тот же интерфейс, что и оригинальный объект (Subject), и управляет доступом к нему.

Proxy:
- Отвечает за логику доступа.
- Может откладывать создание реального объекта до момента первого запроса.
- Может кешировать, проверять права, вести журнал и т.д.

---
### Диаграмма классов

```
[Client]
    |
    v
[Subject] <---------+
   ^                |
   |                |
[RealSubject]    [Proxy]
```
- Subject — общий интерфейс.

- RealSubject — реальный объект, содержащий основную логику.

- Proxy — заместитель, реализует тот же интерфейс и контролирует доступ к RealSubject.

---
### Преимущества

- Управление доступом без изменения исходного объекта
- Отложенная инициализация (lazy loading)
- Кеширование результатов
- Защита от несанкционированного доступа
- Удалённое взаимодействие без изменения клиента

---
### Недостатки

- Усложнение структуры приложения
- Неочевидный контроль — клиент не всегда осознаёт, что работает с заместителем
- Повышенное время отклика (если добавлены проверки, логирование и т.п.)

---
### Применение

__Виртуальный Proxy__ — отложенная загрузка тяжёлых объектов (изображения, видео, БД).

__Защитный Proxy__ — проверка прав пользователя.

__Удалённый Proxy__ — для обращения к объекту на другом сервере.

__Кеширующий Proxy__ — хранение результатов запросов.

__Логирующий Proxy__ — запись всех обращений к объекту.

---
### Альтернативы

__Декоратор__ — похож по структуре, но служит для добавления новой функциональности, а не управления доступом.

__Адаптер__ — для совместимости разных интерфейсов.

__Фасад__ — предоставляет упрощённый интерфейс к сложной системе, но не замещает объект.

---
### Заключение
Паттерн Proxy — мощный инструмент, позволяющий контролировать доступ к объектам и делегировать дополнительные задачи, не перегружая основной бизнес-объект.

Он делает архитектуру гибкой, безопасной и расширяемой — особенно полезен в системах с удалёнными объектами, большими объёмами данных или сложной авторизацией.

